# Euler deconvolution estimates on classic and plateau plots - A Python implementation

by Felipe F. Melo (Observatório Nacional) and Valéria C. F. Barbosa (Observatório
Nacional) (2019)

Email: felipe146@hotmail.com (F.F. Melo); valcris@on.br (V.C.F. Barbosa) 

This repository contains a collection of Python codes and synthetic data 
example for a paper about the open-source package Euler deconvolution.The 
example data reproduce the results and figures shown in the publication. The Euler deconvolution
package `euler_python.py` is compatible with Python 2.7 and 3.7 programming language. To run the program,the 
numpy library is required. In addition, the matplotlib is required to run the script 
`synthetic_euler_python.py`.

1 - Abstract

2 - Content

3 - Prerequisites

4 - Running the files

5 - License

===============================================================================


1 - Abstract
----------------------
Euler deconvolution is a popular method for interpretation of potential-field data. 
The method estimates the position of a geologic source and the data background (base level)
based on the magnetic or gravimetric data, for a given nature (i.e., structural index – SI).
These estimates are computed using a moving data-window scheme spanning the whole dataset. 
The selection of the best estimates uses the plot of these estimates. Traditionally, for each 
SI, the horizontal coordinates estimates obtained for each position of a moving data window 
are plotted in the plan view of the study area and the depth estimates are represented by different
color. This plot requires a statistical criterion to select the best estimates for each SI. In this
case, mostly, the base-level estimates are computed but they are neither used nor shown. Henceforth,
this traditional representation of Euler solution will be referred to as “classic plot” of Euler 
solutions. We compare the classic plot with an alternative plot of Euler estimates (henceforth referred
to “plateau plot” of Euler solutions). In the plateau plot, for each SI, every Euler estimate is 
displayed against the central position of the moving data window. At plateau plot, when the correct
SI is used the horizontal, depth and base-level estimates form a plateau of constant values over the
source. We compare the visualization of Euler deconvolution estimates using classic and plateau plots
through synthetic data generated by two sources with distinct SI, obtaining similar results. In addition,
we plot the base-level estimates in the classic and traditional way to perform the comparison. We also
compare these visualizations of solutions by applying Euler deconvolution to the real magnetic anomaly
of Anitápolis in southern Brazil. Either classic or plateau plots of Euler estimates yields similar 
results and we may infer that a plug generates the Anitápolis anomaly.


2 - Content
----------------------

Python codes:

	- euler_python.py
		General Python module containing the functions to compute de derivatives and Euler deconvolution.
	
	- synthetic_euler_python.py
		Python script to generate the synthetic results. The script loads the total-field anomaly of a 
		synthetic model from the file "synthetic_data.dat" and computes the Euler deconvolution using 
		the functions in "euler_python.py". 
	
Outputs: 
 
	- results/figures - all figures that generated the synthetic example in the manuscript will be saved
				in this folder
						 
	- results/output - all estimates for the plateau plot and the selected estimates of the classic plot, 
				and the meand and standard deviation will be saved in this folder

Test data:

	- synthetic_data.dat
		Synthetic magnetic data generated using the Python packaged "Fatiando a Terra":	
		http://fatiando.org/. This data is an example used in the current publication.
		
	- Linear_L_0-1.txt
		A colormap scale to plot the magnetic data and b-estimates (Niccoli, 2014).

True data for check:

	- true_results/figures - all figures that generated the synthetic example in the manuscript 
			- generated with Python 2.7
								
	- true_results/estimates - all estimates for the plateau plot and the selected estimates of the 
					classic plot

3 - Prerequisites
----------------------
The Python program Euler deconvolution - `euler_python.py` requires the Python library "numpy" 
and the script `synthetic_euler_python.py` requires the Python packages "numpy" and "matplotlib". 
The easier way to get Python and all libraries installed is through the Anaconda Python 
distribution (https://www.anaconda.com/distribution/). After installed Anaconda, install the libraries 
by running the following command in your terminal:

	conda install numpy matplotlib

The program for Euler deconvolution `euler_python.py` and the algorithm `synthetic_euler_python.py`
 are compatible with both Python 2.7 and 3.7.

4 - Running the files
----------------------
After Anaconda and the libraries are installed, you need to run 
the code `synthetic_euler_python.py` to generate the results.
There are two easy ways to run the synthetic test `synthetic_euler_python.py`

1. Via command line: 

	1.1 On linux based systems open the command prompt windows (terminal), and run the command:
	
	On Python 2.7: python synthetic_euler_python.py 
	On Python 3.7: python3 synthetic_euler_python.py 

	1.2 On windows based systems open the Iphyton console (Python 2.7) or 
	Anaconda Navigator and then Jupyter QtConsole (Python 3.7), and run the command:

	run synthetic_euler_python.py

2. Open the Spyder program that comes with the Ananconda installation. In the Spyder, open
the example script "synthetic_euler_python.py" and click in "play" inside the Spyder to execute it.

If everything runs ok, a message will confirm the result and the figures and results shown in 
the publication will be saved, respectively, on the folders: `/results/figures` and 
`/results/estimates`.

The  module `euler_python.py` can be imported to an interactive Python session or called from
an external Python module. The functionalities are documented using standard Python
docstrings.

The file `synthetic_euler_python.py` is a Python-based command line script. By using this 
script, the figures and results of the synthetic test presented in the publication can be reproduced.


5 - License
----------------------
The following legal note is restricted solely to the content of the named files. It cannot
overrule licenses from the Python standard distribution modules, which are imported and
used therein.

The `euler_python.py` and `synthetic_euler_python.py` files are distributed under the 
following license agreement:

BSD 3-clause license

Copyright (c) 2019 Felipe F. Melo and Valéria C.F. Barbosa.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

* Redistributions of source code must retain the above copyright notice,
  this list of conditions and the following disclaimer.
* Redistributions in binary form must reproduce the above copyright notice,
  this list of conditions and the following disclaimer in the documentation
  and/or other materials provided with the distribution.
* Neither the names of the copyright holders nor the names of any contributors
  may be used to endorse or promote products derived from this software
  without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
